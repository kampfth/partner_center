import{c as $,r as a,j as u,e as p,v as T,h as _,g as R}from"./index-DxbtoF3i.js";const A=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],I=$("refresh-cw",A);const L=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],W=$("triangle-alert",L),P=a.forwardRef(({className:e,...t},s)=>u.jsx("div",{ref:s,className:p("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));P.displayName="Card";const O=a.forwardRef(({className:e,...t},s)=>u.jsx("div",{ref:s,className:p("flex flex-col space-y-1.5 p-4 sm:p-6",e),...t}));O.displayName="CardHeader";const M=a.forwardRef(({className:e,...t},s)=>u.jsx("h3",{ref:s,className:p("text-lg font-semibold leading-none tracking-tight",e),...t}));M.displayName="CardTitle";const B=a.forwardRef(({className:e,...t},s)=>u.jsx("p",{ref:s,className:p("text-sm text-muted-foreground",e),...t}));B.displayName="CardDescription";const D=a.forwardRef(({className:e,...t},s)=>u.jsx("div",{ref:s,className:p("p-4 pt-0 sm:p-6 sm:pt-0",e),...t}));D.displayName="CardContent";const U=a.forwardRef(({className:e,...t},s)=>u.jsx("div",{ref:s,className:p("flex items-center p-4 pt-0 sm:p-6 sm:pt-0",e),...t}));U.displayName="CardFooter";var J=Symbol.for("react.lazy"),w=T[" use ".trim().toString()];function V(e){return typeof e=="object"&&e!==null&&"then"in e}function S(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===J&&"_payload"in e&&V(e._payload)}function H(e){const t=F(e),s=a.forwardRef((r,n)=>{let{children:o,...c}=r;S(o)&&typeof w=="function"&&(o=w(o._payload));const i=a.Children.toArray(o),f=i.find(q);if(f){const y=f.props.children,j=i.map(C=>C===f?a.Children.count(y)>1?a.Children.only(null):a.isValidElement(y)?y.props.children:null:C);return u.jsx(t,{...c,ref:n,children:a.isValidElement(y)?a.cloneElement(y,void 0,j):null})}return u.jsx(t,{...c,ref:n,children:o})});return s.displayName=`${e}.Slot`,s}var z=H("Slot");function F(e){const t=a.forwardRef((s,r)=>{let{children:n,...o}=s;if(S(n)&&typeof w=="function"&&(n=w(n._payload)),a.isValidElement(n)){const c=Z(n),i=Y(o,n.props);return n.type!==a.Fragment&&(i.ref=r?_(r,c):c),a.cloneElement(n,i)}return a.Children.count(n)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var G=Symbol("radix.slottable");function q(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===G}function Y(e,t){const s={...t};for(const r in t){const n=e[r],o=t[r];/^on[A-Z]/.test(r)?n&&o?s[r]=(...i)=>{const f=o(...i);return n(...i),f}:n&&(s[r]=n):r==="style"?s[r]={...n,...o}:r==="className"&&(s[r]=[n,o].filter(Boolean).join(" "))}return{...e,...s}}function Z(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}const X=R("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 touch-target",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),k=a.forwardRef(({className:e,variant:t,size:s,asChild:r=!1,...n},o)=>{const c=r?z:"button";return u.jsx(c,{className:p(X({variant:t,size:s,className:e})),ref:o,...n})});k.displayName="Button";const K=a.forwardRef(({className:e,type:t,...s},r)=>u.jsx("input",{type:t,className:p("flex h-10 w-full rounded-lg border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...s}));K.displayName="Input";const Q=R("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ee=a.forwardRef(({className:e,...t},s)=>u.jsx("label",{ref:s,className:p(Q(),e),...t}));ee.displayName="Label";function re({title:e="Something went wrong",message:t,onRetry:s}){return u.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border border-destructive/20 bg-destructive/5 py-12 px-4",children:[u.jsx(W,{className:"h-10 w-10 text-destructive"}),u.jsx("h3",{className:"mt-4 font-semibold text-foreground",children:e}),u.jsx("p",{className:"mt-2 max-w-md text-center text-sm text-muted-foreground",children:t}),s&&u.jsxs(k,{variant:"outline",size:"sm",onClick:s,className:"mt-4",children:[u.jsx(I,{className:"mr-2 h-4 w-4"}),"Try Again"]})]})}const h="/api",b="/login";class l extends Error{constructor(t,s){super(t),this.status=s,this.name="ApiError"}}function E(e){const t=e.trim().toLowerCase();return t.startsWith("<!doctype")||t.startsWith("<html")}function N(){throw window.location.href=b,new l("Session expired. Redirecting to login...",401)}async function g(e){(e.status===401||e.status===403)&&N();const t=await e.text();if(E(t)&&N(),!e.ok){let s="An error occurred";try{const r=JSON.parse(t);s=r.error||r.message||s}catch{s=t||e.statusText}throw new l(s,e.status)}try{return JSON.parse(t)}catch{throw new l("Invalid JSON response from server")}}async function d(e){const t=e.startsWith("http")?e:`${h}${e.startsWith("/")?"":"/"}${e}`,s=await fetch(t,{method:"GET",credentials:"include",headers:{Accept:"application/json"}});return g(s)}async function m(e,t){const s=e.startsWith("http")?e:`${h}${e.startsWith("/")?"":"/"}${e}`,r=await fetch(s,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)});return g(r)}async function te(e,t){const s=e.startsWith("http")?e:`${h}${e.startsWith("/")?"":"/"}${e}`,r=await fetch(s,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)});return g(r)}async function x(e,t){const s=e.startsWith("http")?e:`${h}${e.startsWith("/")?"":"/"}${e}`,r=await fetch(s,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)});return g(r)}async function v(e){const t=e.startsWith("http")?e:`${h}${e.startsWith("/")?"":"/"}${e}`,s=await fetch(t,{method:"DELETE",credentials:"include",headers:{Accept:"application/json"}});return g(s)}async function se(e,t){return new Promise((s,r)=>{const n=new XMLHttpRequest,o=new FormData;o.append("file",e),n.open("POST",`${h}/imports`),n.withCredentials=!0,n.upload.addEventListener("progress",c=>{if(c.lengthComputable&&t){const i=Math.round(c.loaded/c.total*100);t(i)}}),n.addEventListener("load",()=>{if(n.status===401||n.status===403){window.location.href=b,r(new l("Session expired. Redirecting to login...",401));return}const c=n.responseText;if(E(c)){window.location.href=b,r(new l("Session expired. Redirecting to login...",401));return}if(n.status>=200&&n.status<300)try{const i=JSON.parse(c);s(i)}catch{r(new l("Invalid JSON response from server"))}else{let i="An error occurred";try{const f=JSON.parse(c);i=f.error||f.message||i}catch{i=c||n.statusText}r(new l(i,n.status))}}),n.addEventListener("error",()=>{r(new l("Network error occurred"))}),n.addEventListener("abort",()=>{r(new l("Upload aborted"))}),n.send(o)})}async function ae(){return(await d("/tracked-products")).data}async function oe(){return(await d("/groups")).data}async function ce(e,t){return(await m("/groups",{name:e,productIds:t})).data}async function ie(e,t){return(await d(`/reports?start=${e}&end=${t}`)).data}async function ue(){return(await d("/reports/date-range")).data}async function de(){try{return{value:(await d("/settings/sort-order")).data?.value||[]}}catch{return{value:[]}}}async function le(e){return await te("/settings/sort-order",{order:e}),{success:!0}}async function pe(e){return await m("/admin/truncate",{table:e}),{success:!0}}async function fe(){return await m("/admin/reset",{}),{success:!0}}async function he(e,t){return(await se(e,t)).data}async function me(e){return(await d(`/balance?year=${e}`)).data}async function ye(){return(await d("/balance/years")).data}async function ge(e){return(await m("/expenses",{year_month:e.yearMonth,category:e.category,name:e.name,amount:e.amount})).data}async function we(e){return(await x(`/expenses/${e.id}`,{year_month:e.yearMonth,category:e.category,name:e.name,amount:e.amount})).data}async function xe(e){return await v(`/expenses/${e}`),{success:!0}}async function be(e){return(await m("/withdrawals",{year_month:e.yearMonth,amount:e.amount,note:e.note})).data}async function ve(e){return(await x(`/withdrawals/${e.id}`,{year_month:e.yearMonth,amount:e.amount,note:e.note})).data}async function Ce(e){return await v(`/withdrawals/${e}`),{success:!0}}async function Ne(){return(await d("/initial-cash")).data}async function $e(e,t,s){return await m("/initial-cash",{year:e,amount:t,note:s}),{success:!0}}async function Re(e){return await v(`/initial-cash/${e}`),{success:!0}}async function Se(e,t){return(await d(`/analytics/weekday?start=${encodeURIComponent(e)}&end=${encodeURIComponent(t)}`)).data}async function ke(e,t){return(await d(`/analytics/time-bucket?start=${encodeURIComponent(e)}&end=${encodeURIComponent(t)}`)).data}async function Ee(e,t){return(await d(`/analytics/msfs-version?start=${encodeURIComponent(e)}&end=${encodeURIComponent(t)}`)).data}async function je(){return(await d("/products")).data}async function Te(e){return{success:!0,message:(await x(`/products/${encodeURIComponent(e)}`,{is_tracked:!0})).data.is_tracked?"Product tracked":"Product untracked"}}async function _e(e){return{success:!0,message:(await x(`/products/${encodeURIComponent(e)}`,{is_tracked:!1})).data.is_tracked?"Product tracked":"Product untracked"}}export{ge as A,k as B,P as C,we as D,re as E,xe as F,be as G,ve as H,K as I,Ce as J,ee as L,I as R,W as T,D as a,ue as b,O as c,M as d,B as e,ie as f,ae as g,oe as h,ce as i,H as j,Ne as k,Re as l,je as m,_e as n,de as o,le as p,pe as q,fe as r,$e as s,Te as t,he as u,Se as v,ke as w,Ee as x,ye as y,me as z};
