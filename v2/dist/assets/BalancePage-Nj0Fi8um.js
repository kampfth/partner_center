import{r as d,j as e,e as $,i as Je,u as V,a as pe,R as Kt,A as Xt,P as F,b as I,d as Ke,f as Ee,D as qt,C as Zt,k as Qt,l as es,m as C,n as ts,h as ss,g as rs}from"./index-Le8Y4Y77.js";import{C as W,e as z,g as Y,a as J,B as M,H as Fe,E as ns,S as ve,L,I as je,w as as,J as os,K as ls,M as is,N as cs,O as ds,Q as us,U as ps}from"./partnerApi-DoUV8bt6.js";import{g as le,i as Ge,h as Le,a as Xe,u as qe,t as xs,c as Ze,I as ms,R as hs,S as Q,o as ee,p as te,q as se,r as X,j as $e,k as He,l as Be,m as Ue,n as Ve,s as We}from"./select-BA3StZho.js";import"./check-DwQZA-V6.js";const Qe=d.forwardRef(({className:t,...r},s)=>e.jsx("textarea",{className:$("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r}));Qe.displayName="Textarea";var Ne,xe="HoverCard",[et]=pe(xe,[Je]),me=Je(),[fs,Te]=et(xe),tt=t=>{const{__scopeHoverCard:r,children:s,open:n,defaultOpen:a,onOpenChange:o,openDelay:i=700,closeDelay:u=300}=t,l=me(r),m=d.useRef(0),h=d.useRef(0),y=d.useRef(!1),v=d.useRef(!1),[R,f]=V({prop:n,defaultProp:a??!1,onChange:o,caller:xe}),w=d.useCallback(()=>{clearTimeout(h.current),m.current=window.setTimeout(()=>f(!0),i)},[i,f]),b=d.useCallback(()=>{clearTimeout(m.current),!y.current&&!v.current&&(h.current=window.setTimeout(()=>f(!1),u))},[u,f]),A=d.useCallback(()=>f(!1),[f]);return d.useEffect(()=>()=>{clearTimeout(m.current),clearTimeout(h.current)},[]),e.jsx(fs,{scope:r,open:R,onOpenChange:f,onOpen:w,onClose:b,onDismiss:A,hasSelectionRef:y,isPointerDownOnContentRef:v,children:e.jsx(Kt,{...l,children:s})})};tt.displayName=xe;var st="HoverCardTrigger",rt=d.forwardRef((t,r)=>{const{__scopeHoverCard:s,...n}=t,a=Te(st,s),o=me(s);return e.jsx(Xt,{asChild:!0,...o,children:e.jsx(F.a,{"data-state":a.open?"open":"closed",...n,ref:r,onPointerEnter:I(t.onPointerEnter,ce(a.onOpen)),onPointerLeave:I(t.onPointerLeave,ce(a.onClose)),onFocus:I(t.onFocus,a.onOpen),onBlur:I(t.onBlur,a.onClose),onTouchStart:I(t.onTouchStart,i=>i.preventDefault())})})});rt.displayName=st;var gs="HoverCardPortal",[dr,ys]=et(gs,{forceMount:void 0}),ie="HoverCardContent",nt=d.forwardRef((t,r)=>{const s=ys(ie,t.__scopeHoverCard),{forceMount:n=s.forceMount,...a}=t,o=Te(ie,t.__scopeHoverCard);return e.jsx(Ke,{present:n||o.open,children:e.jsx(bs,{"data-state":o.open?"open":"closed",...a,onPointerEnter:I(t.onPointerEnter,ce(o.onOpen)),onPointerLeave:I(t.onPointerLeave,ce(o.onClose)),ref:r})})});nt.displayName=ie;var bs=d.forwardRef((t,r)=>{const{__scopeHoverCard:s,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:i,...u}=t,l=Te(ie,s),m=me(s),h=d.useRef(null),y=Ee(r,h),[v,R]=d.useState(!1);return d.useEffect(()=>{if(v){const f=document.body;return Ne=f.style.userSelect||f.style.webkitUserSelect,f.style.userSelect="none",f.style.webkitUserSelect="none",()=>{f.style.userSelect=Ne,f.style.webkitUserSelect=Ne}}},[v]),d.useEffect(()=>{if(h.current){const f=()=>{R(!1),l.isPointerDownOnContentRef.current=!1,setTimeout(()=>{document.getSelection()?.toString()!==""&&(l.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",f),()=>{document.removeEventListener("pointerup",f),l.hasSelectionRef.current=!1,l.isPointerDownOnContentRef.current=!1}}},[l.isPointerDownOnContentRef,l.hasSelectionRef]),d.useEffect(()=>{h.current&&Ns(h.current).forEach(w=>w.setAttribute("tabindex","-1"))}),e.jsx(qt,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:i,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:I(o,f=>{f.preventDefault()}),onDismiss:l.onDismiss,children:e.jsx(Zt,{...m,...u,onPointerDown:I(u.onPointerDown,f=>{f.currentTarget.contains(f.target)&&R(!0),l.hasSelectionRef.current=!1,l.isPointerDownOnContentRef.current=!0}),ref:y,style:{...u.style,userSelect:v?"text":void 0,WebkitUserSelect:v?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),vs="HoverCardArrow",js=d.forwardRef((t,r)=>{const{__scopeHoverCard:s,...n}=t,a=me(s);return e.jsx(Qt,{...a,...n,ref:r})});js.displayName=vs;function ce(t){return r=>r.pointerType==="touch"?void 0:t()}function Ns(t){const r=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;s.nextNode();)r.push(s.currentNode);return r}var ws=tt,Cs=rt,at=nt;const As=ws,Es=Cs,ot=d.forwardRef(({className:t,align:r="center",sideOffset:s=4,...n},a)=>e.jsx(at,{ref:a,align:r,sideOffset:s,className:$("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));ot.displayName=at.displayName;function T(t){return Number.isFinite(t)?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(t):"$0.00"}function lt(t){return Number.isFinite(t)?`${t.toFixed(2)}%`:"0.00%"}const it=["JAN","FEV","MAR","ABR","MAI","JUN","JUL","AGO","SET","OUT","NOV","DEZ"];function Ts(t){const r=t.split("-");if(r.length!==2)return null;const s=Number(r[1]);return!Number.isFinite(s)||s<1||s>12?null:s-1}function re(t){const r=t.split("-");if(r.length!==2)return t;const s=Number(r[1]);return!Number.isFinite(s)||s<1||s>12?t:it[s-1]}function we(t,r,s){if(r.length===0)return"future";let n=null;for(let a=r.length-1;a>=0;a--){const o=r[a];if((s.autoRevenue?.byMonth?.[o]??0)>0){n=o;break}}return n?t===n?"current":t<n?"closed":"future":"future"}function Rs(t){const r={};for(const s of t)r[s.name]||(r[s.name]={byMonth:{},ids:[],yearTotal:0}),r[s.name].byMonth[s.year_month]=(r[s.name].byMonth[s.year_month]??0)+Number(s.amount??0),r[s.name].yearTotal+=Number(s.amount??0),r[s.name].ids.push(s.id);return r}function Ss(t,r){const s={};for(const n of r)s[n.id]={byMonth:{},idsByMonth:{},yearTotal:0,withdrawalIds:[]};for(const n of t){const a=n.partner_id;if(!a)continue;let o=null;for(const i of r)if(i.id===a||i.id.toLowerCase()===a.toLowerCase()){o=i.id;break}if(o&&s[o]){const i=Number(n.amount)||0;s[o].byMonth[n.year_month]=(s[o].byMonth[n.year_month]||0)+i,s[o].yearTotal+=i,s[o].withdrawalIds.push(n.id),s[o].idsByMonth[n.year_month]||(s[o].idsByMonth[n.year_month]=[]),s[o].idsByMonth[n.year_month].push(n.id)}}return s}function Ps(t,r){const s=Array.isArray(t.autoRevenue?.byLine)?t.autoRevenue.byLine:[],n=Array.isArray(r?.value)?r.value:[],a=new Map;for(const l of s)a.set(l.key,l);const o=[],i=new Set;for(const l of n){const m=String(l??"").trim();if(!m||i.has(m))continue;const h=a.get(m);h&&(o.push({key:m,label:m.toUpperCase(),byMonth:h.byMonth||{},total:h.yearTotal||0,isGroup:h.type==="Group"}),i.add(m))}const u=s.filter(l=>!i.has(l.key)).sort((l,m)=>(m.yearTotal||0)-(l.yearTotal||0));for(const l of u)o.push({key:l.key,label:l.key.toUpperCase(),byMonth:l.byMonth||{},total:l.yearTotal||0,isGroup:l.type==="Group"});return o}function Ms({data:t,sortOrder:r,onAddExpense:s,onEditExpense:n,onDeleteExpense:a,onAddWithdrawal:o,onEditWithdrawal:i,onDeleteWithdrawal:u}){const l=Array.isArray(t.months)?t.months:[],m=Array.isArray(t.fixedExpenses)?t.fixedExpenses:[],h=Array.isArray(t.variableExpenses)?t.variableExpenses:[],y=Array.isArray(t.withdrawals)?t.withdrawals:[],v=Array.isArray(t.partners)?t.partners:[],R=[...m,...h],f=Rs(R),w=Ss(y,v),b=Ps(t,r),A=b.reduce((p,N)=>p+N.total,0),g=t.computed?.yearTotals?.totalExpenses||0,S=t.computed?.yearTotals?.totalWithdrawals||0,x=(t.initialCash||0)+A-g-S;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs(W,{className:"bg-gradient-to-br from-card to-muted/20",children:[e.jsx(z,{className:"py-0 h-[54px] justify-center",children:e.jsx(Y,{className:"text-base",children:"SUMMARY"})}),e.jsxs(J,{className:"py-2",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-card border",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Revenue"}),e.jsx("p",{className:"text-lg font-bold tabular-nums",children:T(A)})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-card border",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Expenses"}),e.jsx("p",{className:"text-lg font-bold tabular-nums",children:T(g+S)})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-card border",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Net"}),e.jsx("p",{className:`text-lg font-bold tabular-nums ${x>=0?"text-green-600":"text-red-600"}`,children:T(x)})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-card border",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Per Partner"}),e.jsx("p",{className:"text-lg font-bold tabular-nums",children:T(v.length>0?x/v.length:0)})]})]}),e.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:["% Expense/Revenue: ",e.jsx("span",{className:"font-semibold",children:lt(A>0?(g+S)/A*100:0)})]})]})]}),e.jsxs(W,{children:[e.jsx(z,{className:"py-2",children:e.jsx(Y,{className:"text-base",children:"PRODUCTS"})}),e.jsx(J,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/40",children:[e.jsx("th",{className:"py-1.5 px-2 text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Product"}),l.map(p=>{const N=we(p,l,t);return e.jsx("th",{className:`py-1.5 px-1 text-right text-xs font-medium uppercase tracking-wide ${N==="current"?"italic text-foreground":"text-muted-foreground"} ${N==="closed"?"bg-green-50 dark:bg-green-950/20 font-bold":""}`,children:re(p)},p)}),e.jsx("th",{className:"py-1.5 px-2 text-right text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-border/50",children:b.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:l.length+2,className:"py-6 text-center text-muted-foreground",children:"No products found. Configure Sort Order in Admin."})}):e.jsxs(e.Fragment,{children:[b.map(p=>e.jsxs("tr",{className:p.isGroup?"bg-muted/30":"hover:bg-muted/20",children:[e.jsx("td",{className:`py-1.5 px-2 ${p.isGroup?"font-semibold":"font-medium"}`,children:p.label}),l.map(N=>{const j=we(N,l,t);return e.jsx("td",{className:`py-1.5 px-1 text-right tabular-nums ${j==="current"?"italic":""} ${j==="closed"?"bg-green-50 dark:bg-green-950/20 font-bold":""}`,children:p.byMonth[N]?T(p.byMonth[N]):e.jsx("span",{className:"text-muted-foreground/40",children:"—"})},N)}),e.jsx("td",{className:"py-1.5 px-2 text-right font-semibold tabular-nums",children:p.total>0?T(p.total):e.jsx("span",{className:"text-muted-foreground/40",children:"—"})})]},p.key)),e.jsxs("tr",{className:"border-t-2 border-border bg-muted/50",children:[e.jsx("td",{className:"py-2 px-2 font-bold text-sm",children:"TOTAL"}),l.map(p=>{const N=b.reduce((E,O)=>E+(O.byMonth[p]||0),0),j=we(p,l,t);return e.jsx("td",{className:`py-2 px-1 text-right font-bold tabular-nums ${j==="current"?"italic":""} ${j==="closed"?"bg-green-50 dark:bg-green-950/20":""}`,children:N>0?T(N):e.jsx("span",{className:"text-muted-foreground/40",children:"—"})},p)}),e.jsx("td",{className:"py-2 px-2 text-right font-bold tabular-nums",children:T(A)})]})]})})]})})})]}),e.jsxs(W,{children:[e.jsxs(z,{className:"py-0 h-12 flex flex-row items-center justify-between space-y-0",children:[e.jsx(Y,{className:"text-base",children:"EXPENSES"}),e.jsxs(M,{size:"sm",variant:"outline",onClick:s,children:[e.jsx(le,{className:"h-4 w-4 mr-1"}),"Add"]})]}),e.jsx(J,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted/40 border-b",children:[e.jsx("th",{className:"py-1.5 px-2 text-xs font-medium text-muted-foreground uppercase",children:"Name"}),l.map(p=>e.jsx("th",{className:"py-1.5 px-1 text-right text-xs font-medium text-muted-foreground uppercase",children:re(p)},p)),e.jsx("th",{className:"py-1.5 px-2 text-right text-xs font-medium text-muted-foreground uppercase",children:"Total"}),e.jsx("th",{className:"py-1.5 px-1 w-16"})]})}),e.jsx("tbody",{className:"divide-y divide-border/50",children:Object.keys(f).length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:l.length+3,className:"py-4 text-center text-muted-foreground text-xs",children:"No expenses."})}):Object.entries(f).map(([p,N])=>{const j=R.find(E=>E.name===p);return e.jsxs("tr",{className:"hover:bg-muted/20",children:[e.jsx("td",{className:"py-1.5 px-2 font-medium",children:p.toUpperCase()}),l.map(E=>e.jsx("td",{className:"py-1.5 px-1 text-right tabular-nums",children:N.byMonth[E]?T(N.byMonth[E]):e.jsx("span",{className:"text-muted-foreground/40",children:"—"})},E)),e.jsx("td",{className:"py-1.5 px-2 text-right font-semibold tabular-nums",children:T(N.yearTotal)}),e.jsx("td",{className:"py-1.5 px-1",children:j&&e.jsxs("div",{className:"flex items-center gap-0.5 justify-end",children:[e.jsx(M,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>n(j),children:e.jsx(Ge,{className:"h-3 w-3"})}),e.jsx(M,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>a(j.id),children:e.jsx(Le,{className:"h-3 w-3"})})]})})]},p)})})]})})})]}),e.jsxs(W,{children:[e.jsxs(z,{className:"py-2 flex flex-row items-center justify-between space-y-0",children:[e.jsx(Y,{className:"text-base",children:"WITHDRAWALS"}),e.jsxs(M,{size:"sm",variant:"outline",onClick:o,children:[e.jsx(le,{className:"h-4 w-4 mr-1"}),"Add"]})]}),e.jsx(J,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/40",children:[e.jsx("th",{className:"py-1.5 px-2 text-xs font-medium text-muted-foreground uppercase",children:"Partner"}),l.map(p=>e.jsx("th",{className:"py-1.5 px-1 text-right text-xs font-medium text-muted-foreground uppercase",children:re(p)},p)),e.jsx("th",{className:"py-1.5 px-2 text-right text-xs font-medium text-muted-foreground uppercase",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-border/50",children:v.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:l.length+2,className:"py-4 text-center text-muted-foreground text-xs",children:"No partners configured."})}):v.map(p=>{const N=w[p.id]||{byMonth:{},idsByMonth:{},yearTotal:0};return e.jsxs("tr",{className:"hover:bg-muted/20",children:[e.jsx("td",{className:"py-1.5 px-2 font-medium",children:p.name.toUpperCase()}),l.map(j=>{const E=N.byMonth[j],O=N.idsByMonth[j]||[];if(!E)return e.jsx("td",{className:"py-1.5 px-1 text-right tabular-nums",children:e.jsx("span",{className:"text-muted-foreground/40",children:"—"})},j);const P=O.length>0?y.find(B=>B.id===O[0]):null;return e.jsx("td",{className:"py-1.5 px-1 text-right tabular-nums",children:e.jsxs(As,{openDelay:100,closeDelay:100,children:[e.jsx(Es,{asChild:!0,children:e.jsx("span",{className:"cursor-pointer hover:text-primary hover:underline transition-colors",children:T(E)})}),e.jsx(ot,{className:"w-auto p-2",align:"center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-muted-foreground mr-2",children:[re(j),": ",T(E)]}),P&&e.jsxs(e.Fragment,{children:[e.jsxs(M,{variant:"outline",size:"sm",className:"h-7 px-2",onClick:()=>i(P),children:[e.jsx(Ge,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsxs(M,{variant:"destructive",size:"sm",className:"h-7 px-2",onClick:()=>u(P.id),children:[e.jsx(Le,{className:"h-3 w-3 mr-1"}),"Delete"]})]})]})})]})},j)}),e.jsx("td",{className:"py-1.5 px-2 text-right font-semibold tabular-nums",children:N.yearTotal>0?T(N.yearTotal):e.jsx("span",{className:"text-muted-foreground/40",children:"—"})})]},p.id)})})]})})})]})]})}var he="Collapsible",[Is,ct]=pe(he),[_s,Re]=Is(he),dt=d.forwardRef((t,r)=>{const{__scopeCollapsible:s,open:n,defaultOpen:a,disabled:o,onOpenChange:i,...u}=t,[l,m]=V({prop:n,defaultProp:a??!1,onChange:i,caller:he});return e.jsx(_s,{scope:s,disabled:o,contentId:Xe(),open:l,onOpenToggle:d.useCallback(()=>m(h=>!h),[m]),children:e.jsx(F.div,{"data-state":Pe(l),"data-disabled":o?"":void 0,...u,ref:r})})});dt.displayName=he;var ut="CollapsibleTrigger",pt=d.forwardRef((t,r)=>{const{__scopeCollapsible:s,...n}=t,a=Re(ut,s);return e.jsx(F.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":Pe(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...n,ref:r,onClick:I(t.onClick,a.onOpenToggle)})});pt.displayName=ut;var Se="CollapsibleContent",xt=d.forwardRef((t,r)=>{const{forceMount:s,...n}=t,a=Re(Se,t.__scopeCollapsible);return e.jsx(Ke,{present:s||a.open,children:({present:o})=>e.jsx(Ds,{...n,ref:r,present:o})})});xt.displayName=Se;var Ds=d.forwardRef((t,r)=>{const{__scopeCollapsible:s,present:n,children:a,...o}=t,i=Re(Se,s),[u,l]=d.useState(n),m=d.useRef(null),h=Ee(r,m),y=d.useRef(0),v=y.current,R=d.useRef(0),f=R.current,w=i.open||u,b=d.useRef(w),A=d.useRef(void 0);return d.useEffect(()=>{const g=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(g)},[]),es(()=>{const g=m.current;if(g){A.current=A.current||{transitionDuration:g.style.transitionDuration,animationName:g.style.animationName},g.style.transitionDuration="0s",g.style.animationName="none";const S=g.getBoundingClientRect();y.current=S.height,R.current=S.width,b.current||(g.style.transitionDuration=A.current.transitionDuration,g.style.animationName=A.current.animationName),l(n)}},[i.open,n]),e.jsx(F.div,{"data-state":Pe(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!w,...o,ref:h,style:{"--radix-collapsible-content-height":v?`${v}px`:void 0,"--radix-collapsible-content-width":f?`${f}px`:void 0,...t.style},children:w&&a})});function Pe(t){return t?"open":"closed"}var ks=dt,Os=pt,Fs=xt,k="Accordion",Gs=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Me,Ls,$s]=ts(k),[fe]=pe(k,[$s,ct]),Ie=ct(),mt=C.forwardRef((t,r)=>{const{type:s,...n}=t,a=n,o=n;return e.jsx(Me.Provider,{scope:t.__scopeAccordion,children:s==="multiple"?e.jsx(Vs,{...o,ref:r}):e.jsx(Us,{...a,ref:r})})});mt.displayName=k;var[ht,Hs]=fe(k),[ft,Bs]=fe(k,{collapsible:!1}),Us=C.forwardRef((t,r)=>{const{value:s,defaultValue:n,onValueChange:a=()=>{},collapsible:o=!1,...i}=t,[u,l]=V({prop:s,defaultProp:n??"",onChange:a,caller:k});return e.jsx(ht,{scope:t.__scopeAccordion,value:C.useMemo(()=>u?[u]:[],[u]),onItemOpen:l,onItemClose:C.useCallback(()=>o&&l(""),[o,l]),children:e.jsx(ft,{scope:t.__scopeAccordion,collapsible:o,children:e.jsx(gt,{...i,ref:r})})})}),Vs=C.forwardRef((t,r)=>{const{value:s,defaultValue:n,onValueChange:a=()=>{},...o}=t,[i,u]=V({prop:s,defaultProp:n??[],onChange:a,caller:k}),l=C.useCallback(h=>u((y=[])=>[...y,h]),[u]),m=C.useCallback(h=>u((y=[])=>y.filter(v=>v!==h)),[u]);return e.jsx(ht,{scope:t.__scopeAccordion,value:i,onItemOpen:l,onItemClose:m,children:e.jsx(ft,{scope:t.__scopeAccordion,collapsible:!0,children:e.jsx(gt,{...o,ref:r})})})}),[Ws,ge]=fe(k),gt=C.forwardRef((t,r)=>{const{__scopeAccordion:s,disabled:n,dir:a,orientation:o="vertical",...i}=t,u=C.useRef(null),l=Ee(u,r),m=Ls(s),y=qe(a)==="ltr",v=I(t.onKeyDown,R=>{if(!Gs.includes(R.key))return;const f=R.target,w=m().filter(j=>!j.ref.current?.disabled),b=w.findIndex(j=>j.ref.current===f),A=w.length;if(b===-1)return;R.preventDefault();let g=b;const S=0,_=A-1,x=()=>{g=b+1,g>_&&(g=S)},p=()=>{g=b-1,g<S&&(g=_)};switch(R.key){case"Home":g=S;break;case"End":g=_;break;case"ArrowRight":o==="horizontal"&&(y?x():p());break;case"ArrowDown":o==="vertical"&&x();break;case"ArrowLeft":o==="horizontal"&&(y?p():x());break;case"ArrowUp":o==="vertical"&&p();break}const N=g%A;w[N].ref.current?.focus()});return e.jsx(Ws,{scope:s,disabled:n,direction:a,orientation:o,children:e.jsx(Me.Slot,{scope:s,children:e.jsx(F.div,{...i,"data-orientation":o,ref:l,onKeyDown:n?void 0:v})})})}),de="AccordionItem",[zs,_e]=fe(de),yt=C.forwardRef((t,r)=>{const{__scopeAccordion:s,value:n,...a}=t,o=ge(de,s),i=Hs(de,s),u=Ie(s),l=Xe(),m=n&&i.value.includes(n)||!1,h=o.disabled||t.disabled;return e.jsx(zs,{scope:s,open:m,disabled:h,triggerId:l,children:e.jsx(ks,{"data-orientation":o.orientation,"data-state":Ct(m),...u,...a,ref:r,disabled:h,open:m,onOpenChange:y=>{y?i.onItemOpen(n):i.onItemClose(n)}})})});yt.displayName=de;var bt="AccordionHeader",vt=C.forwardRef((t,r)=>{const{__scopeAccordion:s,...n}=t,a=ge(k,s),o=_e(bt,s);return e.jsx(F.h3,{"data-orientation":a.orientation,"data-state":Ct(o.open),"data-disabled":o.disabled?"":void 0,...n,ref:r})});vt.displayName=bt;var Ae="AccordionTrigger",jt=C.forwardRef((t,r)=>{const{__scopeAccordion:s,...n}=t,a=ge(k,s),o=_e(Ae,s),i=Bs(Ae,s),u=Ie(s);return e.jsx(Me.ItemSlot,{scope:s,children:e.jsx(Os,{"aria-disabled":o.open&&!i.collapsible||void 0,"data-orientation":a.orientation,id:o.triggerId,...u,...n,ref:r})})});jt.displayName=Ae;var Nt="AccordionContent",wt=C.forwardRef((t,r)=>{const{__scopeAccordion:s,...n}=t,a=ge(k,s),o=_e(Nt,s),i=Ie(s);return e.jsx(Fs,{role:"region","aria-labelledby":o.triggerId,"data-orientation":a.orientation,...i,...n,ref:r,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});wt.displayName=Nt;function Ct(t){return t?"open":"closed"}var Ys=mt,Js=yt,Ks=vt,At=jt,Et=wt;const Xs=Ys,ne=d.forwardRef(({className:t,...r},s)=>e.jsx(Js,{ref:s,className:$("border-b",t),...r}));ne.displayName="AccordionItem";const ae=d.forwardRef(({className:t,children:r,...s},n)=>e.jsx(Ks,{className:"flex",children:e.jsxs(At,{ref:n,className:$("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...s,children:[r,e.jsx(xs,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));ae.displayName=At.displayName;const oe=d.forwardRef(({className:t,children:r,...s},n)=>e.jsx(Et,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...s,children:e.jsx("div",{className:$("pb-4 pt-0",t),children:r})}));oe.displayName=Et.displayName;var Tt="Toggle",De=d.forwardRef((t,r)=>{const{pressed:s,defaultPressed:n,onPressedChange:a,...o}=t,[i,u]=V({prop:s,onChange:a,defaultProp:n??!1,caller:Tt});return e.jsx(F.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":t.disabled?"":void 0,...o,ref:r,onClick:I(t.onClick,()=>{t.disabled||u(!i)})})});De.displayName=Tt;var Rt=De,H="ToggleGroup",[St]=pe(H,[Ze]),Pt=Ze(),ke=C.forwardRef((t,r)=>{const{type:s,...n}=t;if(s==="single"){const a=n;return e.jsx(qs,{...a,ref:r})}if(s==="multiple"){const a=n;return e.jsx(Zs,{...a,ref:r})}throw new Error(`Missing prop \`type\` expected on \`${H}\``)});ke.displayName=H;var[Mt,It]=St(H),qs=C.forwardRef((t,r)=>{const{value:s,defaultValue:n,onValueChange:a=()=>{},...o}=t,[i,u]=V({prop:s,defaultProp:n??"",onChange:a,caller:H});return e.jsx(Mt,{scope:t.__scopeToggleGroup,type:"single",value:C.useMemo(()=>i?[i]:[],[i]),onItemActivate:u,onItemDeactivate:C.useCallback(()=>u(""),[u]),children:e.jsx(_t,{...o,ref:r})})}),Zs=C.forwardRef((t,r)=>{const{value:s,defaultValue:n,onValueChange:a=()=>{},...o}=t,[i,u]=V({prop:s,defaultProp:n??[],onChange:a,caller:H}),l=C.useCallback(h=>u((y=[])=>[...y,h]),[u]),m=C.useCallback(h=>u((y=[])=>y.filter(v=>v!==h)),[u]);return e.jsx(Mt,{scope:t.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:l,onItemDeactivate:m,children:e.jsx(_t,{...o,ref:r})})});ke.displayName=H;var[Qs,er]=St(H),_t=C.forwardRef((t,r)=>{const{__scopeToggleGroup:s,disabled:n=!1,rovingFocus:a=!0,orientation:o,dir:i,loop:u=!0,...l}=t,m=Pt(s),h=qe(i),y={role:"group",dir:h,...l};return e.jsx(Qs,{scope:s,rovingFocus:a,disabled:n,children:a?e.jsx(hs,{asChild:!0,...m,orientation:o,dir:h,loop:u,children:e.jsx(F.div,{...y,ref:r})}):e.jsx(F.div,{...y,ref:r})})}),ue="ToggleGroupItem",Dt=C.forwardRef((t,r)=>{const s=It(ue,t.__scopeToggleGroup),n=er(ue,t.__scopeToggleGroup),a=Pt(t.__scopeToggleGroup),o=s.value.includes(t.value),i=n.disabled||t.disabled,u={...t,pressed:o,disabled:i},l=C.useRef(null);return n.rovingFocus?e.jsx(ms,{asChild:!0,...a,focusable:!i,active:o,ref:l,children:e.jsx(ze,{...u,ref:r})}):e.jsx(ze,{...u,ref:r})});Dt.displayName=ue;var ze=C.forwardRef((t,r)=>{const{__scopeToggleGroup:s,value:n,...a}=t,o=It(ue,s),i={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},u=o.type==="single"?i:void 0;return e.jsx(De,{...u,...a,ref:r,onPressedChange:l=>{l?o.onItemActivate(n):o.onItemDeactivate(n)}})}),kt=ke,Ot=Dt;const Ft=ss("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),tr=d.forwardRef(({className:t,variant:r,size:s,...n},a)=>e.jsx(Rt,{ref:a,className:$(Ft({variant:r,size:s,className:t})),...n}));tr.displayName=Rt.displayName;const Gt=d.createContext({size:"default",variant:"default"}),Lt=d.forwardRef(({className:t,variant:r,size:s,children:n,...a},o)=>e.jsx(kt,{ref:o,className:$("flex items-center justify-center gap-1",t),...a,children:e.jsx(Gt.Provider,{value:{variant:r,size:s},children:n})}));Lt.displayName=kt.displayName;const $t=d.forwardRef(({className:t,children:r,variant:s,size:n,...a},o)=>{const i=d.useContext(Gt);return e.jsx(Ot,{ref:o,className:$(Ft({variant:i.variant||s,size:i.size||n}),t),...a,children:r})});$t.displayName=Ot.displayName;function sr(t){const r=Ts(t);return r===null?t:it[r]}function Ce(t){const r={};for(const s of t)r[s.year_month]=(r[s.year_month]??0)+Number(s.amount??0);return r}function rr(t,r){const s=Array.isArray(t.autoRevenue?.byLine)?t.autoRevenue.byLine:[],n=Array.isArray(r?.value)?r.value:[],a=new Map;for(const l of s)a.set(l.key,l);const o=[],i=new Set;for(const l of n){const m=String(l??"").trim();if(!m||i.has(m))continue;const h=a.get(m);h&&(o.push({key:m,label:m.toUpperCase(),byMonth:h.byMonth||{},total:h.yearTotal||0,isGroup:h.type==="Group"}),i.add(m))}const u=s.filter(l=>!i.has(l.key)).sort((l,m)=>(m.yearTotal||0)-(l.yearTotal||0));for(const l of u)o.push({key:l.key,label:l.key.toUpperCase(),byMonth:l.byMonth||{},total:l.yearTotal||0,isGroup:l.type==="Group"});return o}function nr({data:t,sortOrder:r,activeMonth:s,onChangeMonth:n,onAddExpense:a,onAddWithdrawal:o}){const i=Array.isArray(t.months)?t.months:[],u=Array.isArray(t.fixedExpenses)?t.fixedExpenses:[],l=Array.isArray(t.variableExpenses)?t.variableExpenses:[],m=Array.isArray(t.withdrawals)?t.withdrawals:[],h=Array.isArray(t.partners)?t.partners:[],y=[...i,"TOTAL"],v=rr(t,r),R=Ce(u),f=Ce(l),w=s==="TOTAL",b=v.reduce((x,p)=>x+p.total,0),A=t.computed?.yearTotals?.totalExpenses||0,g=t.computed?.yearTotals?.totalWithdrawals||0,S=t.initialCash||0,_=S+b-A-g;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs(W,{children:[e.jsx(z,{className:"py-2",children:e.jsx(Y,{className:"text-sm",children:"MONTH"})}),e.jsx(J,{className:"py-2",children:e.jsx(Lt,{type:"single",value:s,onValueChange:x=>x&&n(x),className:"flex flex-wrap justify-start gap-1",children:y.map(x=>e.jsx($t,{value:x,className:"h-8 px-2 text-xs",children:x==="TOTAL"?"TOTAL":sr(x)},x))})})]}),e.jsxs(W,{className:"bg-gradient-to-br from-card to-muted/20",children:[e.jsx(z,{className:"py-2",children:e.jsx(Y,{className:"text-sm",children:"SUMMARY"})}),e.jsxs(J,{className:"py-2 space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"p-2 rounded bg-card border",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"INITIAL CASH"}),e.jsx("p",{className:"text-sm font-bold tabular-nums",children:T(S)})]}),e.jsxs("div",{className:"p-2 rounded bg-card border",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"REVENUE"}),e.jsx("p",{className:"text-sm font-bold tabular-nums",children:T(b)})]}),e.jsxs("div",{className:"p-2 rounded bg-card border",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"EXPENSES"}),e.jsx("p",{className:"text-sm font-bold tabular-nums",children:T(A+g)})]}),e.jsxs("div",{className:"p-2 rounded bg-card border",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"NET"}),e.jsx("p",{className:`text-sm font-bold tabular-nums ${_>=0?"text-green-600":"text-red-600"}`,children:T(_)})]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["% Expense/Revenue: ",e.jsx("span",{className:"font-semibold",children:lt(b>0?(A+g)/b*100:0)})]})]})]}),e.jsxs(Xs,{type:"multiple",defaultValue:["products"],className:"w-full",children:[e.jsxs(ne,{value:"products",children:[e.jsx(ae,{className:"py-2 text-sm",children:"PRODUCTS"}),e.jsx(oe,{children:e.jsx("div",{className:"space-y-1",children:v.length===0?e.jsx("p",{className:"py-4 text-center text-xs text-muted-foreground",children:"No products. Configure Sort Order."}):v.map(x=>{const p=w?x.total:x.byMonth[s]||0;return e.jsxs("div",{className:`flex items-center justify-between py-1.5 border-b border-border/30 ${x.isGroup?"bg-muted/30":""}`,children:[e.jsx("span",{className:`text-xs ${x.isGroup?"font-semibold":"font-medium"}`,children:x.label}),e.jsx("span",{className:"text-xs font-semibold tabular-nums",children:p>0?T(p):e.jsx("span",{className:"text-muted-foreground/50",children:"—"})})]},x.key)})})})]}),e.jsxs(ne,{value:"expenses",children:[e.jsx(ae,{className:"py-2 text-sm",children:"EXPENSES"}),e.jsxs(oe,{children:[e.jsxs(M,{size:"sm",onClick:a,className:"h-8 mb-2 w-full",children:[e.jsx(le,{className:"h-3 w-3 mr-1"}),"Add Expense"]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between py-1.5 border-b border-border/30",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"FIXED"}),e.jsx("span",{className:"text-xs font-semibold tabular-nums",children:T(w?Object.values(R).reduce((x,p)=>x+p,0):R[s]||0)})]}),e.jsxs("div",{className:"flex items-center justify-between py-1.5 border-b border-border/30",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"VARIABLE"}),e.jsx("span",{className:"text-xs font-semibold tabular-nums",children:T(w?Object.values(f).reduce((x,p)=>x+p,0):f[s]||0)})]})]})]})]}),e.jsxs(ne,{value:"withdrawals",children:[e.jsx(ae,{className:"py-2 text-sm",children:"WITHDRAWALS"}),e.jsxs(oe,{children:[e.jsxs(M,{size:"sm",onClick:o,className:"h-8 mb-2 w-full",children:[e.jsx(le,{className:"h-3 w-3 mr-1"}),"Add Withdrawal"]}),e.jsx("div",{className:"space-y-1",children:h.length===0?e.jsx("p",{className:"py-4 text-center text-xs text-muted-foreground",children:"No partners."}):h.map(x=>{const p=m.filter(E=>E.partner_id===x.id),N=Ce(p),j=w?Object.values(N).reduce((E,O)=>E+O,0):N[s]||0;return e.jsxs("div",{className:"flex items-center justify-between py-1.5 border-b border-border/30",children:[e.jsx("span",{className:"text-xs font-medium",children:x.name.toUpperCase()}),e.jsx("span",{className:"text-xs font-semibold tabular-nums",children:j>0?T(j):e.jsx("span",{className:"text-muted-foreground/50",children:"—"})})]},x.id)})})]})]})]})]})}function ar({data:t,sortOrder:r,mobileMonth:s,onChangeMobileMonth:n,onAddExpense:a,onEditExpense:o,onDeleteExpense:i,onAddWithdrawal:u,onEditWithdrawal:l,onDeleteWithdrawal:m}){return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"block lg:hidden",children:e.jsx(nr,{data:t,sortOrder:r,activeMonth:s,onChangeMonth:n,onAddExpense:a,onAddWithdrawal:u})}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(Ms,{data:t,sortOrder:r,onAddExpense:a,onEditExpense:o,onDeleteExpense:i,onAddWithdrawal:u,onEditWithdrawal:l,onDeleteWithdrawal:m})})]})}const Ye=["JAN","FEV","MAR","ABR","MAI","JUN","JUL","AGO","SET","OUT","NOV","DEZ"];function ur(){const[t,r]=d.useState([]),[s,n]=d.useState(new Date().getFullYear()),[a,o]=d.useState(null),[i,u]=d.useState(null),[l,m]=d.useState("TOTAL"),[h,y]=d.useState(!0),[v,R]=d.useState(!0),[f,w]=d.useState(null),{toast:b}=rs(),[A,g]=d.useState(!1),[S,_]=d.useState(null),[x,p]=d.useState({yearMonth:"",category:"fixed",name:"",amount:""}),[N,j]=d.useState(!1),[E,O]=d.useState(null),[P,B]=d.useState({yearMonth:"",amount:"",note:""});d.useEffect(()=>{let c=!0;async function D(){try{const[U,K]=await Promise.all([as().catch(()=>({value:[]})),os().catch(()=>({years:[]}))]);if(!c)return;u(U??{value:[]});const q=Array.isArray(K?.years)?K.years:[];r(q);const Oe=q.length>0?q[q.length-1]:new Date().getFullYear();n(Oe);try{const Z=await Fe(Oe);c&&o(Z)}catch(Z){c&&w(Z instanceof Error?Z.message:"Failed to load balance")}}catch(U){console.warn("Balance init failed",U),c&&w("Failed to initialize balance page")}finally{c&&(y(!1),R(!1))}}return D(),()=>{c=!1}},[]);const G=d.useCallback(async c=>{if(!v){y(!0),w(null);try{const U=await Fe(c??s);o(U);const K=Array.isArray(U?.months)?U.months:[];K.length&&l!=="TOTAL"&&!K.includes(l)&&m("TOTAL")}catch(D){w(D instanceof Error?D.message:"Failed to load balance")}finally{y(!1)}}},[s,l,v]);d.useEffect(()=>{v||G(s)},[s]);const Ht=async()=>{try{await ls({yearMonth:x.yearMonth,category:x.category,name:x.name,amount:parseFloat(x.amount)}),b({title:"Expense created successfully"}),g(!1),ye(),G()}catch(c){b({title:"Error",description:c instanceof Error?c.message:"Failed to create expense",variant:"destructive"})}},Bt=async()=>{if(S)try{await is({id:S.id,yearMonth:x.yearMonth,category:x.category,name:x.name,amount:parseFloat(x.amount)}),b({title:"Expense updated successfully"}),g(!1),_(null),ye(),G()}catch(c){b({title:"Error",description:c instanceof Error?c.message:"Failed to update expense",variant:"destructive"})}},Ut=async c=>{if(confirm("Are you sure you want to delete this expense?"))try{await cs(c),b({title:"Expense deleted successfully"}),G()}catch(D){b({title:"Error",description:D instanceof Error?D.message:"Failed to delete expense",variant:"destructive"})}},Vt=async()=>{try{await ds({yearMonth:P.yearMonth,amount:parseFloat(P.amount),note:P.note||void 0}),b({title:"Withdrawal created successfully"}),j(!1),be(),G()}catch(c){b({title:"Error",description:c instanceof Error?c.message:"Failed to create withdrawal",variant:"destructive"})}},Wt=async()=>{if(E)try{await us({id:E.id,yearMonth:P.yearMonth,amount:parseFloat(P.amount),note:P.note||void 0}),b({title:"Withdrawal updated successfully"}),j(!1),O(null),be(),G()}catch(c){b({title:"Error",description:c instanceof Error?c.message:"Failed to update withdrawal",variant:"destructive"})}},zt=async c=>{if(confirm("Are you sure you want to delete this withdrawal?"))try{await ps(c),b({title:"Withdrawal deleted successfully"}),G()}catch(D){b({title:"Error",description:D instanceof Error?D.message:"Failed to delete withdrawal",variant:"destructive"})}},ye=()=>{p({yearMonth:"",category:"fixed",name:"",amount:""}),_(null)},be=()=>{B({yearMonth:"",amount:"",note:""}),O(null)},Yt=c=>{_(c),p({yearMonth:c.year_month,category:c.category,name:c.name,amount:c.amount.toString()}),g(!0)},Jt=c=>{O(c),B({yearMonth:c.year_month,amount:c.amount.toString(),note:c.note||""}),j(!0)};return f?e.jsx(ns,{message:f,onRetry:G}):h||!a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ve,{className:"h-8 w-48"}),e.jsx(ve,{className:"h-10 w-32"})]}),e.jsx(ve,{className:"h-96 w-full"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Balance"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly revenue, expenses, withdrawals, and totals."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{htmlFor:"year-select",className:"text-xs text-muted-foreground",children:"Year"}),e.jsxs(Q,{value:s.toString(),onValueChange:c=>n(parseInt(c,10)),disabled:t.length===0,children:[e.jsx(ee,{id:"year-select",className:"w-28",children:e.jsx(te,{placeholder:t.length?"Select":"No data"})}),e.jsx(se,{children:t.map(c=>e.jsx(X,{value:c.toString(),children:c},c))})]})]})]}),e.jsx(ar,{data:a,sortOrder:i,mobileMonth:l,onChangeMobileMonth:m,onAddExpense:()=>{ye(),g(!0)},onEditExpense:Yt,onDeleteExpense:Ut,onAddWithdrawal:()=>{be(),j(!0)},onEditWithdrawal:Jt,onDeleteWithdrawal:zt}),e.jsx($e,{open:A,onOpenChange:g,children:e.jsxs(He,{children:[e.jsxs(Be,{children:[e.jsx(Ue,{children:S?"Edit Expense":"Add Expense"}),e.jsx(Ve,{children:"Add or edit an expense for a specific month."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(L,{htmlFor:"exp-month",children:"Month"}),e.jsxs(Q,{value:x.yearMonth,onValueChange:c=>p({...x,yearMonth:c}),children:[e.jsx(ee,{id:"exp-month",children:e.jsx(te,{placeholder:"Select month"})}),e.jsx(se,{children:a.months.map(c=>e.jsxs(X,{value:c,children:[Ye[parseInt(c.split("-")[1],10)-1]," ",c.split("-")[0]]},c))})]})]}),e.jsxs("div",{children:[e.jsx(L,{htmlFor:"exp-category",children:"Category"}),e.jsxs(Q,{value:x.category,onValueChange:c=>p({...x,category:c}),children:[e.jsx(ee,{id:"exp-category",children:e.jsx(te,{})}),e.jsxs(se,{children:[e.jsx(X,{value:"fixed",children:"Fixed"}),e.jsx(X,{value:"variable",children:"Variable"})]})]})]}),e.jsxs("div",{children:[e.jsx(L,{htmlFor:"exp-name",children:"Name"}),e.jsx(je,{id:"exp-name",value:x.name,onChange:c=>p({...x,name:c.target.value}),placeholder:"Expense name"})]}),e.jsxs("div",{children:[e.jsx(L,{htmlFor:"exp-amount",children:"Amount"}),e.jsx(je,{id:"exp-amount",type:"number",step:"0.01",value:x.amount,onChange:c=>p({...x,amount:c.target.value}),placeholder:"0.00"})]})]}),e.jsxs(We,{children:[e.jsx(M,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),e.jsx(M,{onClick:S?Bt:Ht,disabled:!x.yearMonth||!x.name||!x.amount,children:S?"Update":"Create"})]})]})}),e.jsx($e,{open:N,onOpenChange:j,children:e.jsxs(He,{children:[e.jsxs(Be,{children:[e.jsx(Ue,{children:E?"Edit Withdrawal":"Add Withdrawal"}),e.jsx(Ve,{children:"Add or edit a shared withdrawal for both partners for a specific month."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(L,{htmlFor:"with-month",children:"Month"}),e.jsxs(Q,{value:P.yearMonth,onValueChange:c=>B({...P,yearMonth:c}),children:[e.jsx(ee,{id:"with-month",children:e.jsx(te,{placeholder:"Select month"})}),e.jsx(se,{children:a.months.map(c=>e.jsxs(X,{value:c,children:[Ye[parseInt(c.split("-")[1],10)-1]," ",c.split("-")[0]]},c))})]})]}),e.jsxs("div",{children:[e.jsx(L,{htmlFor:"with-amount",children:"Amount"}),e.jsx(je,{id:"with-amount",type:"number",step:"0.01",value:P.amount,onChange:c=>B({...P,amount:c.target.value}),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(L,{htmlFor:"with-note",children:"Note (optional)"}),e.jsx(Qe,{id:"with-note",value:P.note,onChange:c=>B({...P,note:c.target.value}),placeholder:"Additional notes...",rows:3})]})]}),e.jsxs(We,{children:[e.jsx(M,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsx(M,{onClick:E?Wt:Vt,disabled:!P.yearMonth||!P.amount,children:E?"Update":"Create"})]})]})})]})}export{ur as default};
